<ng-container *ngIf="!loading ; else loadingIndicator">

  <div class="row">
    <div class="col-lg-6 col-12 product-bg">
      <h4 class="m-2" routerLink="/"><img src="assets/icons/back-icon.svg" class="mx-1" alt=""> back to list</h4>
      <div class="w-100 h-100 d-flex justify-content-center align-items-center">
        <img [ngStyle]="" class="image-container {{selectedSize}}" src="{{product.image}}">
      </div>
    </div>

    <div class="col-lg-6 col-12  product-container">
      <div class="product-details">
        <h1 class="mt-4">{{product.title}}</h1>
        <div class="d-flex flex-row justify-content-start align-items-center ">
          <span class="category">{{product.category}}</span>
          <div class="mx-4">|</div>
          <bar-rating class="star" [(rate)]="product.rating.rate" [max]="5"></bar-rating>
          <p class=" mx-2 my-0">{{product.rating.rate}} ({{product.rating.count}} reviews)</p>
        </div>
        <h2 class="my-3">Description</h2>
        <ul class="px-4">
          <li>Makanan yang lengkap dan seimbang, dengan 41 nutrisi penting.</li>
          <li>Makanan yang lengkap dan seimbang, dengan 41 nutrisi penting.</li>
          <li>Makanan yang lengkap dan seimbang, dengan 41 nutrisi penting.</li>
          <li>Makanan yang lengkap dan seimbang, dengan 41 nutrisi penting.</li>
        </ul>
        <h2 class="my-2">Size</h2>

        <mat-button-toggle-group class="mt-3" [(ngModel)]="selectedSize">
          <mat-button-toggle class="large" value="large"><img class="large" src="{{product.image}}" alt="">
          </mat-button-toggle>
          <mat-button-toggle class="default" value="default"><img class="default" src="{{product.image}}" alt="">
          </mat-button-toggle>
          <mat-button-toggle class="small" value="small"><img class="small" src="{{product.image}}" alt="">
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>


    </div>
  </div>
  <div class="cart-container">
    <div class="row flex-grow-1">
    <div class="col-lg-6 col-12 my-2 d-flex ">

      <img src="{{product.image}}" alt="">
      <div class="d-flex flex-column justify-content-center mx-3">
        <h3>{{product.title}}</h3>
        <span class="category">{{product.category}}</span>
      </div>
    </div>
    <div class="col-lg-6 col-12 my-2 d-flex justify-content-between align-items-center ">
      <div class="d-flex align-items-center gap-5">
        <p>Qty:</p>
        <div class="count" (click)=" count > 1 ? count= count - 1 : $event.stopPropagation()">-</div>
        <input type="number" class="counter" [(ngModel)]="count">
        <div class="count" (click)="count = count + 1 ">+</div>

      </div>
      <button mat-raised-button  color="primary" type="submit" (click)="addToCart()"> Add to cart</button>

    </div>

    </div>
  </div>
</ng-container>

<ng-template #loadingIndicator>
  <div class="d-flex justify-content-center mt-5">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
